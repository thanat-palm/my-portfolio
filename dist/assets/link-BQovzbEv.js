import{a as le,r as s,b as ie,c as ce,d as U,e as ue,f as de,g as fe,h as A,i as he,k as B,l as pe}from"./index-YCyHm4xB.js";const ve="Error preloading route! ☝️";var me=le();function ye(n,m){const a=ie(),[u,y]=s.useState(!1),v=s.useRef(!1),l=ce(m),{activeProps:g=()=>({className:"active"}),inactiveProps:O=()=>({}),activeOptions:o,to:T,preload:w,preloadDelay:j,hashScrollIntoView:V,replace:W,startTransition:$,resetScroll:G,viewTransition:J,children:C,target:f,disabled:r,style:b,className:P,onClick:S,onFocus:k,onMouseEnter:x,onMouseLeave:E,onTouchStart:_,ignoreBlocker:Q,...X}=n,{params:Te,search:be,hash:Pe,state:Se,mask:ke,reloadDocument:xe,...I}=X,F=s.useMemo(()=>{try{return new URL(`${T}`),"external"}catch{}return"internal"},[T]),Y=U({select:e=>e.location.search,structuralSharing:!0}),N=ue({select:e=>{var t;return n.from??((t=e[e.length-1])==null?void 0:t.fullPath)}}),i=s.useMemo(()=>({...n,from:N}),[n,N]),c=s.useMemo(()=>a.buildLocation(i),[a,i,Y]),h=s.useMemo(()=>i.reloadDocument?!1:w??a.options.defaultPreload,[a.options.defaultPreload,w,i.reloadDocument]),Z=j??a.options.defaultPreloadDelay??0,R=U({select:e=>{if(o!=null&&o.exact){if(!he(e.location.pathname,c.pathname,a.basepath))return!1}else{const t=B(e.location.pathname,a.basepath).split("/");if(!B(c.pathname,a.basepath).split("/").every((oe,se)=>oe===t[se]))return!1}return((o==null?void 0:o.includeSearch)??!0)&&!pe(e.location.search,c.search,{partial:!(o!=null&&o.exact),ignoreUndefined:!(o!=null&&o.explicitUndefined)})?!1:o!=null&&o.includeHash?e.location.hash===c.hash:!0}}),d=s.useCallback(()=>{a.preloadRoute(i).catch(e=>{console.warn(e),console.warn(ve)})},[i,a]),ee=s.useCallback(e=>{e!=null&&e.isIntersecting&&d()},[d]);if(de(l,ee,{rootMargin:"100px"},{disabled:!!r||h!=="viewport"}),fe(()=>{v.current||!r&&h==="render"&&(d(),v.current=!0)},[r,d,h]),F==="external")return{...I,ref:l,type:F,href:T,...C&&{children:C},...f&&{target:f},...r&&{disabled:r},...b&&{style:b},...P&&{className:P},...S&&{onClick:S},...k&&{onFocus:k},...x&&{onMouseEnter:x},...E&&{onMouseLeave:E},..._&&{onTouchStart:_}};const te=e=>{if(!r&&!ge(e)&&!e.defaultPrevented&&(!f||f==="_self")&&e.button===0){e.preventDefault(),me.flushSync(()=>{y(!0)});const t=a.subscribe("onResolved",()=>{t(),y(!1)});return a.navigate({...i,replace:W,resetScroll:G,hashScrollIntoView:V,startTransition:$,viewTransition:J,ignoreBlocker:Q})}},q=e=>{r||h&&d()},ae=q,re=e=>{if(r)return;const t=e.target||{};if(h){if(t.preloadTimeout)return;t.preloadTimeout=setTimeout(()=>{t.preloadTimeout=null,d()},Z)}},ne=e=>{if(r)return;const t=e.target||{};t.preloadTimeout&&(clearTimeout(t.preloadTimeout),t.preloadTimeout=null)},p=e=>t=>{var M;(M=t.persist)==null||M.call(t),e.filter(Boolean).forEach(K=>{t.defaultPrevented||K(t)})},D=R?A(g,{})??{}:{},L=R?{}:A(O,{}),z=[P,D.className,L.className].filter(Boolean).join(" "),H={...b,...D.style,...L.style};return{...I,...D,...L,href:r?void 0:c.maskedLocation?a.history.createHref(c.maskedLocation.href):a.history.createHref(c.href),ref:l,onClick:p([S,te]),onFocus:p([k,q]),onMouseEnter:p([x,re]),onMouseLeave:p([E,ne]),onTouchStart:p([_,ae]),disabled:!!r,target:f,...Object.keys(H).length&&{style:H},...z&&{className:z},...r&&{role:"link","aria-disabled":!0},...R&&{"data-status":"active","aria-current":"page"},...u&&{"data-transitioning":"transitioning"}}}const _e=s.forwardRef((n,m)=>{const{_asChild:a,...u}=n,{type:y,ref:v,...l}=ye(u,m),g=typeof u.children=="function"?u.children({isActive:l["data-status"]==="active"}):u.children;return typeof a>"u"&&delete l.disabled,s.createElement(a||"a",{...l,ref:v},g)});function ge(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}export{_e as L};
